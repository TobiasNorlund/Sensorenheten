/*
 * distsensor.h
 *
 * Created: 4/13/2013 7:12:49 PM
 *  Author: johka546
 */ 


#ifndef DISTSENSOR_H_
#define DISTSENSOR_H_

#include <avr/interrupt.h>

#define NUMSAMPLES 10

volatile uint8_t distSensor0[NUMSAMPLES];
volatile uint8_t distSensor1[NUMSAMPLES];
volatile uint8_t distSensor2[NUMSAMPLES];
volatile uint8_t distSensor3[NUMSAMPLES];
volatile uint8_t distSensor4[NUMSAMPLES];
volatile uint8_t distSensor5[NUMSAMPLES];
volatile uint8_t distSensor6[NUMSAMPLES];
volatile uint8_t distSensor7[NUMSAMPLES];

void Init_distsensor(void);
void changeDistSensor(uint8_t ch);
uint8_t filterSampleArray(volatile uint8_t *samples, uint8_t numOfSamples, uint8_t threshold);
uint8_t longDistSensor(uint8_t sample);
uint8_t shortDistSensor(uint8_t sample);

uint8_t absDist(uint8_t a1, uint8_t a2);

uint8_t lookUpLongSensor[255] = {
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	152,
	147,
	142,
	136,
	132,
	127,
	123,
	118,
	114,
	111,
	107,
	104,
	100,
	97,
	94,
	92,
	89,
	87,
	84,
	82,
	80,
	78,
	76,
	74,
	72,
	70,
	69,
	67,
	66,
	64,
	63,
	62,
	60,
	59,
	58,
	57,
	56,
	55,
	54,
	53,
	52,
	51,
	50,
	49,
	48,
	47,
	47,
	46,
	45,
	44,
	44,
	43,
	42,
	42,
	41,
	41,
	40,
	40,
	39,
	38,
	38,
	37,
	37,
	36,
	36,
	36,
	35,
	35,
	34,
	34,
	33,
	33,
	33,
	32,
	32,
	32,
	31,
	31,
	31,
	30,
	30,
	30,
	29,
	29,
	29,
	28,
	28,
	28,
	28,
	27,
	27,
	27,
	26,
	26,
	26,
	26,
	26,
	25,
	25,
	25,
	25,
	24,
	24,
	24,
	24,
	24,
	23,
	23,
	23,
	23,
	23,
	22,
	22,
	22,
	22,
	22,
	22,
	21,
	21,
	21,
	21,
	21,
	21,
	20,
	20,
	20,
	20,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
	255,
}

#endif /* DISTSENSOR_H_ */
